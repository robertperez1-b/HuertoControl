<div class="container mx-auto p-6">
  <h2 class="text-2xl font-bold text-green-700 mb-6">Historial de Plagas</h2>
  
  <div *ngIf="loading" class="text-center py-8">
    <div class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-green-500 mx-auto"></div>
  </div>

  <div *ngIf="!loading && plagas.length === 0" class="bg-yellow-50 border-l-4 border-yellow-400 p-4">
    <p>No hay plagas registradas todav√≠a.</p>
  </div>

  <div *ngIf="!loading && plagas.length > 0" class="overflow-x-auto">
    <table class="min-w-full bg-white border">
      <thead>
        <tr class="bg-gray-100">
          <th class="py-2 px-4 border">Nombre</th>
          <th class="py-2 px-4 border">Cultivo</th>
          <th class="py-2 px-4 border">Intensidad</th>
          <th class="py-2 px-4 border">Fecha</th>
          <th class="py-2 px-4 border">Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let plaga of plagas" class="hover:bg-gray-50">
          <td class="py-2 px-4 border">{{ plaga.nombre }}</td>
          <td class="py-2 px-4 border">{{ plaga.cultivo }}</td>
          <td class="py-2 px-4 border">
            <div class="flex items-center">
              <div class="h-4 bg-green-100 rounded-full" [style.width.%]="plaga.intensidad * 20"></div>
              <span class="ml-2">{{ plaga.intensidad }}/5</span>
            </div>
          </td>
          <td class="py-2 px-4 border">{{ plaga.fecha | date:'shortDate' }}</td>
          <td class="py-2 px-4 border text-center">
            <button (click)="eliminarPlaga(plaga._id)" class="text-red-500 hover:text-red-700">
              Eliminar
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
